<section class="twcss-relative twcss-w-full twcss-px-4 twcss-py-8 twcss-mx-auto twcss-max-w-7xl">
  <div class="twcss-flex twcss-items-center twcss-justify-between twcss-mb-6">
    <h2 class="twcss-text-xl twcss-font-semibold">
      Featured
      <span class="twcss-text-blue-500">Products</span>
    </h2>
    <a
      href="/collections/all"
      class="twcss-flex twcss-items-center twcss-text-sm twcss-text-blue-600 hover:twcss-text-blue-800"
    >
      See all {% render 'icon-chevron-right' %}
    </a>
  </div>

  <div class="twcss-relative">
    {%- if section.settings.collection != blank -%}
      <div class="featured-products-slider twcss-relative twcss-overflow-hidden">
        <div class="swiper-wrapper twcss-flex twcss-transition-transform twcss-duration-300 twcss-ease-out">
          {%- for product in section.settings.collection.products limit: 8 -%}
            <div class="swiper-slide twcss-flex-none twcss-w-full sm:twcss-w-1/2 md:twcss-w-1/3 lg:twcss-w-1/4 xl:twcss-w-1/5 twcss-px-2">
              <div class="twcss-bg-white twcss-rounded-lg twcss-shadow-sm twcss-p-4 twcss-h-full">
                <!-- 产品图片 -->
                <div class="twcss-relative twcss-aspect-square twcss-mb-4">
                  <img
                    src="{{ product.featured_image | img_url: '400x400', crop: 'center' }}"
                    alt="{{ product.title }}"
                    class="twcss-object-cover twcss-w-full twcss-h-full twcss-rounded-md"
                    loading="lazy"
                    width="400"
                    height="400"
                  >
                  {%- if product.available == false -%}
                    <span class="twcss-absolute twcss-top-2 twcss-left-2 twcss-bg-gray-800 twcss-text-white twcss-text-xs twcss-px-2 twcss-py-1 twcss-rounded">
                      Sold out
                    </span>
                  {%- endif -%}
                </div>

                <!-- 产品信息 -->
                <div class="twcss-space-y-2">
                  <p class="twcss-text-sm twcss-text-gray-600">{{ product.vendor }}</p>
                  <h3 class="twcss-text-sm twcss-font-medium twcss-line-clamp-2">{{ product.title }}</h3>

                  <div class="twcss-flex twcss-items-center twcss-justify-between">
                    <p class="twcss-text-sm twcss-font-semibold">
                      {{ product.price | money }}
                    </p>
                    <button
                      class="add-to-cart twcss-bg-orange-500 hover:twcss-bg-orange-600 twcss-text-white twcss-px-4 twcss-py-2 twcss-rounded-md twcss-text-sm twcss-transition-colors twcss-duration-200"
                      data-product-id="{{ product.id }}"
                    >
                      Add to Cart
                    </button>
                  </div>
                </div>
              </div>
            </div>
          {%- endfor -%}
        </div>

        <!-- 导航按钮 -->
        <button class="prev-button twcss-absolute twcss-left-0 twcss-top-1/2 twcss--translate-y-1/2 twcss--left-4 lg:twcss--left-6 twcss-z-10 twcss-w-10 twcss-h-10 twcss-flex twcss-items-center twcss-justify-center twcss-bg-white twcss-rounded-full twcss-shadow-md hover:twcss-bg-gray-50 twcss-transition-colors twcss-duration-200">
          {% render 'icon-chevron-left' %}
        </button>
        <button class="next-button twcss-absolute twcss-right-0 twcss-top-1/2 twcss--translate-y-1/2 twcss--right-4 lg:twcss--right-6 twcss-z-10 twcss-w-10 twcss-h-10 twcss-flex twcss-items-center twcss-justify-center twcss-bg-white twcss-rounded-full twcss-shadow-md hover:twcss-bg-gray-50 twcss-transition-colors twcss-duration-200">
          {% render 'icon-chevron-right' %}
        </button>

        <!-- 分页指示器 -->
        <div class="swiper-pagination twcss-flex twcss-justify-center twcss-items-center twcss-gap-2 twcss-mt-6">
          {%- for i in (1..forloop.length) -%}
            <button
              class="twcss-w-2 twcss-h-2 twcss-rounded-full twcss-bg-gray-200 hover:twcss-bg-gray-300 twcss-transition-colors twcss-duration-200 {% if forloop.first %}twcss-bg-blue-500{% endif %}"
            ></button>
          {%- endfor -%}
        </div>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Maximum products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Products",
      "category": "Products"
    }
  ]
}
{% endschema %}
