<section class="twcss-w-[var(--page-width)] twcss-mx-auto twcss-px-4 twcss-py-8">
  <div class="twcss-relative twcss-h-[500px]">
    <div class="twcss-flex twcss-items-center twcss-justify-between twcss-mb-6">
      <h2 class="twcss-text-2xl twcss-font-semibold">
        Featured
        <span class="twcss-text-2xl twcss-text-blue-500">Products</span>
      </h2>
      <a
        href="/collections/all"
        class="twcss-flex twcss-items-center twcss-text-sm twcss-text-blue-600 hover:twcss-text-blue-800"
      >
        See all {% render 'icon-chevron-right' %}
      </a>
    </div>

    <div class="twcss-relative">
      {%- if section.settings.collection != blank -%}
        <button class="prev-button twcss-absolute twcss-left-0 twcss-top-1/2 twcss--translate-y-1/2 twcss--left-4 lg:twcss--left-6 twcss-z-10 twcss-w-10 twcss-h-10 twcss-flex twcss-items-center twcss-justify-center twcss-bg-white twcss-rounded-full twcss-shadow-md hover:twcss-bg-gray-50 twcss-transition-colors twcss-duration-200">
          {% render 'icon-chevron-left' %}
        </button>
        <button class="next-button twcss-absolute twcss-right-0 twcss-top-1/2 twcss--translate-y-1/2 twcss--right-4 lg:twcss--right-6 twcss-z-10 twcss-w-10 twcss-h-10 twcss-flex twcss-items-center twcss-justify-center twcss-bg-white twcss-rounded-full twcss-shadow-md hover:twcss-bg-gray-50 twcss-transition-colors twcss-duration-200">
          {% render 'icon-chevron-right' %}
        </button>

        <div class="featured-products-slider twcss-relative twcss-overflow-hidden twcss-h-full">
          <div class="swiper-wrapper twcss-flex twcss-transition-transform twcss-duration-300 twcss-ease-out">
            {%- for product in section.settings.collection.products limit: 8 -%}
              <div class="swiper-slide twcss-flex-none twcss-w-full xl:twcss-w-[calc((100%-64px)/5)] twcss-px-2">
                <div class="twcss-bg-white twcss-rounded-lg twcss-shadow-sm twcss-h-[415px] twcss-w-full hover:twcss-shadow-md twcss-transition-shadow twcss-duration-200 twcss-flex twcss-flex-col">
                  <div class="twcss-h-[246px] twcss-w-full twcss-shadow-sm">
                    <a href="{{ product.url }}" class="twcss-block">
                      <!-- 产品图片区域 -->
                      <img
                        src="{{ product.featured_image | img_url: '246x246', crop: 'center' }}"
                        alt="{{ product.title }}"
                        class="twcss-object-contain twcss-w-full twcss-h-full"
                        loading="lazy"
                        width="246"
                        height="246"
                      >
                    </a>
                  </div>
                  <div class="twcss-flex-1 twcss-flex twcss-flex-col twcss-bg-[#f8f8f8]">
                    <!-- 产品信息区域 -->
                    <div class="twcss-p-4 twcss-space-y-2 twcss-flex twcss-flex-col twcss-flex-1">
                      <p class="twcss-text-gray-600">{{ product.vendor }}</p>

                      <h3 class="twcss-text-base twcss-font-medium twcss-line-clamp-2">{{ product.title }}</h3>

                      <div class="twcss-space-y-1 twcss-text-sm">
                        <p class="twcss-text-gray-600">Customer Product # {{ product.id }}</p>
                        <p class="twcss-text-gray-600">
                          Supplier Product # {{ product.metafields.custom.supplier_id | default: 'R9013DS' }}
                        </p>
                        <p class="twcss-text-gray-600">Supplier: {{ product.vendor }}</p>
                      </div>
                    </div>
                  </div>

                  <!-- 添加到购物车按钮 -->
                  <div class="twcss-mt-4">
                    <form action="/cart/add" method="post" onclick="event.stopPropagation()">
                      <input type="hidden" name="id" value="{{ product.variants.first.id }}">
                      <input type="hidden" name="quantity" value="1">
                      <button
                        type="submit"
                        class="twcss-bg-orange-500 twcss-flex twcss-items-center twcss-justify-between hover:twcss-bg-orange-600 twcss-text-white twcss-px-4 twcss-py-2 twcss-rounded twcss-text-sm twcss-w-full"
                      >
                        <div class="twcss-flex twcss-items-center twcss-justify-between">Add to Cart</div>
                        <div class="twcss-ml-2 twcss-border-l">{% render 'icon-chevron-down' %}</div>
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            {%- endfor -%}
          </div>

          <!-- 分页指示器 -->
          <div class="swiper-pagination twcss-flex twcss-justify-center twcss-items-center twcss-gap-2 twcss-mt-6">
            {%- for i in (1..forloop.length) -%}
              <button
                class="twcss-w-2 twcss-h-2 twcss-rounded-full twcss-bg-gray-200 hover:twcss-bg-gray-300 twcss-transition-colors twcss-duration-200 {% if forloop.first %}twcss-bg-blue-500{% endif %}"
              ></button>
            {%- endfor -%}
          </div>
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Maximum products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Products",
      "category": "Products"
    }
  ]
}
{% endschema %}
