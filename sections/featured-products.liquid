<section class="twcss-w-[var(--page-width)] twcss-mx-auto twcss-px-4 twcss-py-8">
  <div class="twcss-relative twcss-h-[500px]">
    <div class="twcss-flex twcss-items-center twcss-justify-between twcss-mb-6">
      <h2 class="twcss-text-2xl twcss-font-semibold">
        Featured
        <span class="twcss-text-2xl twcss-text-blue-500">Products</span>
      </h2>
      <a
        href="/collections/all"
        class="twcss-flex twcss-items-center twcss-text-sm twcss-text-blue-600 hover:twcss-text-blue-800"
      >
        See all {% render 'icon-chevron-right' %}
      </a>
    </div>

    <div class="twcss-relative twcss-max-w-96 md:twcss-max-w-full">
      {%- if section.settings.collection != blank -%}
        <button class="prev-button twcss-absolute twcss-left-0 twcss-top-1/2 twcss--translate-y-1/2 twcss--left-4 lg:twcss--left-6 twcss-z-10 twcss-w-10 twcss-h-10 twcss-flex twcss-items-center twcss-justify-center twcss-bg-white twcss-rounded-full twcss-shadow-md hover:twcss-bg-gray-50 twcss-transition-colors twcss-duration-200">
          {% render 'icon-chevron-left' %}
        </button>
        <button class="next-button twcss-absolute twcss-right-0 twcss-top-1/2 twcss--translate-y-1/2 twcss--right-4 lg:twcss--right-6 twcss-z-10 twcss-w-10 twcss-h-10 twcss-flex twcss-items-center twcss-justify-center twcss-bg-white twcss-rounded-full twcss-shadow-md hover:twcss-bg-gray-50 twcss-transition-colors twcss-duration-200">
          {% render 'icon-chevron-right' %}
        </button>

        <div class="featured-products-slider twcss-relative twcss-overflow-hidden twcss-h-full">
          <div class="swiper-wrapper">
            {%- for product in section.settings.collection.products limit: 8 -%}
              <div class="swiper-slide">
                {% render 'product-card', product: product, show_vendor: true %}
              </div>
            {%- endfor -%}
          </div>

          <!-- 添加导航按钮 -->
          <div class="swiper-button-prev twcss-hidden md:twcss-flex"></div>
          <div class="swiper-button-next twcss-hidden md:twcss-flex"></div>

          <!-- 分页器 -->
          <div class="swiper-pagination"></div>
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Swiper('.featured-products-slider', {
      slidesPerView: 1, // 移动端默认显示1个
      spaceBetween: 16, // 滑块之间的间距
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      breakpoints: {
        // >= 768px
        768: {
          slidesPerView: 3,
          spaceBetween: 24,
        },
        // >= 1024px
        1024: {
          slidesPerView: 4,
          spaceBetween: 24,
        },
        // >= 1280px
        1280: {
          slidesPerView: 5,
          spaceBetween: 24,
        },
      },
    });
  });
</script>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Maximum products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Products",
      "category": "Products"
    }
  ]
}
{% endschema %}
